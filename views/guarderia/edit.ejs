<h1>estas en guarderia - edit</h1>

<h2>Edit
  <%= user.username %> 's profile</h2>

<section>
  <img src="<%= user.profilepic_path %>" alt="<%= user.profilepic_name %>" />
</section>

<h2>Upload your profile photo</h2>
<form action="/guarderias/upload" method="post" enctype="multipart/form-data">
  <input type="text" name="name">
  <input type="file" name="photo">
  <input type="submit" value="Save">
</form>    

<form action="/guarderias/edit" method="POST" id="form-container">
  <div class="form-row align-items-center mx-auto" style="width: 800px;">
    <div class="col-auto">
      <label for="firstname">Name</label>
      <input class="fsr-only" id="guarderia-name" type="text" name="name" value='<%= user.name %>'>
    </div>
    <div class="col-auto">
      <label for="lastname">Description</label>
      <input class="fsr-only" id="guarderia-description" type="text" name="description" value='<%= user.description %>'>
    </div>
    <div class="col-auto">
      <label for="street">Calle</label>
      <input class="fsr-only" id="guarderia-street" type="text" name="street" value='<%= user.address.street %>'>
    </div>
    <div class="col-auto">
      <label for="number">Número</label>
      <input class="fsr-only" id="guarderia-streetnumber" type="text" name="streetnumber" value='<%= user.address.number %>'>
    </div>
    <div class="col-auto">
      <label for="postcode">Código Postal</label>
      <input class="fsr-only" id="guarderia-postcode" type="text" name="postcode" value='<%= user.address.postcode %>'>
    </div>
    <div class="col-auto">
      <label for="city">Ciudad</label>
      <input class="fsr-only" id="guarderia-city" type="text" name="city" value='<%= user.address.city %>'>
    </div>

    <!-- Añadidos dos campos ocultos para guardar la latitud y la longitud del jquery-user al server -->
    <input hidden id="latitude" type="" name="latitude" value='<%= user.address.coordinates[1] %>'>
    <input hidden id="longitude" type="" name="longitude" value='<%= user.address.coordinates[0] %>'>
    <div class="col-auto" id="verifyAddressBlock">
      <button type="submit" id="verifyAddress" class="btn btn-primary">Verify address</button>
      <p id="found" style="display: none;">La dirección es correcta</p>
      <p id="not-found" style="display: none;">La dirección no es correcta, prueba otra vez</p>
    </div>

    <div class="col-auto">
      <label for="telephone">Teléfono</label>
      <input class="fsr-only" id="guarderia-telephone" type="text" name="telephone" value='<%= user.telephone %>'>
    </div>
    <div class="col-auto">
      <input type="checkbox" id="guarderia-garden" name="garden" '<% if(user.services.garden) { %>' checked '<%} %>'>Garden
      <br>
    </div>
    <div class="col-auto">
      <input type="checkbox" id="guaderia-swimming_pool" name="swimming_pool" '<% if(user.services.swimming_pool) { %>' checked '<%} %>'>Swimming Pool
    </div>
    <div class="col-auto">
      <input type="checkbox" id="guaderia-kitchen" name="kitchen" '<% if(user.services.kitchen) { %>' checked '<%} %>'>Kitchen
    </div>
    <div class="col-auto">
      <input type="checkbox" id="guaderia-extra_hours" name="extra_hours" '<% if(user.services.extra_hours) { %>' checked '<%} %>'>Extra Hours
    </div>
    <div class="col-auto">
      <input type="checkbox" id="guaderia-spanish" name="spanish" '<% if(user.services.spanish) { %>' checked '<%} %>'>Spanish
    </div>
    <div class="col-auto">
      <input type="checkbox" id="guaderia-english" name="english" '<% if(user.services.english) { %>' checked '<%} %>'>English
    </div>
    <div class="col-auto">
      <input type="checkbox" id="guaderia-german" name="german" '<% if(user.services.german) { %>' checked '<%} %>'>German
    </div>
    <div class="col-auto">
      <input type="checkbox" id="guaderia-parking_carrito" name="parking_carrito" '<% if(user.services.parking_carrito) { %>' checked '<%} %>'>Parking para carritos
    </div>
    <div class="col-auto">
      <input type="checkbox" id="guaderia-locker" name="locker" '<% if(user.services.locker) { %>' checked '<%} %>'>Taquilla individual
    </div>
    <div class="col-auto">
      <label for="email">E-mail</label>
      <input class="fsr-only" id="guarderia-email" type="text" name="email" value='<%= user.email %>'>
    </div>

    <div class="col-auto">
      <button type="submit" class="btn btn-primary">Save changes</button>
    </div>
  </div>
  <% if (typeof message !== "undefined") { %>
    <div class="error-message">
      <%= message %>
    </div>
    <% } %>
      </div>
</form>

<h2>Upload more pictures</h2>
<form action="/guarderias/uploadpictures" method="post" enctype="multipart/form-data">
  <input type="text" name="name">
  <input type="file" name="photo">
  <input type="submit" value="Save">
</form>    

<%user.otherpics.forEach(function(path, index, array){ %>
  <div class="col-md-4">
    <div class="thumbnail">
        <img src='<%= path %>' alt="Lights" style="width:100%">
        <a href="/guarderias/deletepicture/<%= index %>" class="btn" role="button">Delete picture</a>
    </div>
  </div>
<% }) %>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyASqvdUmBMrb4nRgdJfkT7WlhOGA1VKTOw"></script>
<script type="text/javascript" src="/javascripts/guarderia-geocode.js"></script>
